```text
出处 [1] [PDF/B-64694CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM_01.PDF) 

平面选择指令（G17,G18,G19）
自动参考点返回（G28）
第2/第3/第4 参考点返回（G30）
从参考点移动（G29）
15. 补偿功能
编程
B-64694CM/01
322 -
15.5
复合加工用刀具偏置功能（G43.7）
T
概述
在以前，加工中心系统和车床系统中的刀具偏置画面不同。利用本功能，就可以通过通用刀具偏置画面显示偏置数据以
及执行相关操作。
格式
依据车床系统的格式。详情请参阅《操作说明书（车床系统）(B-64694A-1)“扩展刀具选择”。
解释
Z 轴的刀具长度补偿
下面的功能中所使用的补偿值，只可使用在刀具偏置画面的“Z 轴（长度）”中设定的值。“X 轴”, “Y 轴”,“刀尖
半径（半径）”等中设定的值不可使用。
G43 / G44：刀具长度补偿
可编程数据输入(G10)
在刀具偏置画面输入/输出偏置数据时，还有输入/输出基于程序运行的数据时所使用的数据格式为以下G10 格式。
G10 的数据格式
例
O0010;
G10L200P1X_Z_R_Q_Y_;
刀具位置补偿等、刀具磨损补偿、覆盖
G10L1200P1X_Z_R_Q_Y_;
刀具位置补偿等、刀具磨损补偿、累加
G10L201P1X_Z_R_Y_;
刀具位置补偿等、刀具形状补偿、覆盖
G10L1201P1X_Z_R_Y_;
刀具位置补偿等、刀具形状补偿、累加
:
M02;
G10 Lbaaa ＋ 各种刀具补偿格式
L 格式：Lbaaa
aaa : 200－ 刀具位置补偿、刀尖半径补偿（刀具径补偿）、假想刀尖方向
刀具磨损补偿
: 201－ 刀具位置补偿、刀尖半径补偿（刀具径补偿）、假想刀尖方向

出处 [2] [PDF/B-64694CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM_01.PDF) 

No（未登录）
是否为登录到料盘中的刀具？
（料盘号是否为0？）
Yes（登录）
No（对象外）
料盘是否为检索对象？
（参数（No.13203#0～#3）的设定是否为0？）
Yes（对象）
Yes（登录）
是否登录在其他路径的主轴位置或是待机位置？
No（未登录）
Yes（不管理）
No（对象外）
不管理，但是否为检索对象的刀具？
（刀具信息的位4 SEN 是否为1？）
Yes（对象）
检索结束
No（管理）
刀具寿命状态是否为“不进行寿命管理(0)”？
B-64694CM/01
编程
10. 刀具功能（T 功能）
153 -
Yes（已用尽）
刀具寿命状态是否为“寿命已尽(3)”？
No（未用尽）
Yes（折损）
刀具寿命状态是否为“刀具折损(4)”？
No（未折损）
下一刀具的检查
检索结束
将剩余寿命或自定义数据数值较小的一方作为候选项。
参数SWC(No.13203#6)
0：剩余寿命的检查
1：自定义数据的检查
系统变量
当前由M06 更换并作为主轴使用的刀具、以及由T 代码指定的与下一个使用刀具相关的下列刀具管理数据，可以通过
用户宏程序变量读取。
使用中
项目
#8401
刀具管理数据号
#8402
刀具种类号（T）
#8403
刀具寿命计数器
#8404
最大刀具寿命值
#8405
刀具预告寿命值
#8406
刀具寿命状态
#8407
自定义数据0(位)
#8408
刀具信息
#8409
刀具长度补偿号（H）
#8410
刀具径补偿号（D）
#8411
主轴转速（S）
#8412
切削进给速度（F）
#8413

出处 [3] [PDF/B-64694CM-1_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM-1_01.PDF) 

2
按下竖排软键［形状2］。
3
进入EDIT（编辑）模式。
4
按下横排软键［输出］。
5
设定将要输出的文件名。
键入文件名，按下横排软键［F 名称］。
省略文件名时，就采用默认的文件名“SEC_GEOM.TXT”。
6
按下横排软键［执行］。
输出第2 形状数据，画面右下的“OUTPUT”提示信息闪烁显示。在完成读入处理之后，画面上的“OUTPUT”显
示消失。
要取消输出时，按下横排软键［取消］。
B
64694CM
1/01
操作
2. 显示和设定数据
289
2
显示和设定数据
2.1
按下功能键
显示的画面
按下功能键
可显示或设定刀具偏置值及各类设定数据。
这里将描述如何显示或设定下面数据。
1.
刀具偏置值
2.
工件坐标系偏移量
3.
刀具补偿／第2 形状偏置值
4.
Y 轴偏置值
5.
第4 轴／第5 轴偏置值
6.
卡盘尾架屏障
2.1.1
显示和设定刀具偏置值
本机床为显示和设定刀具位置偏置值及刀尖半径补偿值提供了专门的画面。
设定和显示刀具位置偏置值、刀尖半径补偿值的步骤（8.4/10.4”显示器的情形）
步骤
1  按功能键
。
若是多路径系统，事先利用路径选择开关设定哪个路径的刀具偏置值。
2
按下软键［刀偏］。
或按下
数次，显示出刀具偏置画面。
根据有无刀具形状/磨损偏置，所显示的画面会有所不同。
图2.1.1 (a)  刀具形状/磨损偏置无效的情形（10.4”显示器）
2. 显示和设定数据
操作
B
64694CM
1/01
290 -
图2.1.1 (b)  刀具形状偏置值（10.4”显示器）

出处 [4] [PDF/B-64694CM-1_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM-1_01.PDF) 

L
α
编程路径
C
L
r
r
刀尖半径中心路径
S
α
S
r
r
C
C
C
编程路径
刀尖半径中心路径
工件
工件
工件
工件
C
B
64694CM
1/01
编程
5. 补偿功能
169
例外情况
圆弧的终点不在圆弧上时
如图5.4.3 (a)所示，圆弧的终点不在圆弧上时，系统则假设刀尖半径补偿是相对于一个假想圆进行，该假想圆通过圆弧
终点，圆弧中心为中心，根据这种假设，系统创建一个矢量，并进行补偿。“圆弧→圆弧”的情况也相同。
编程路径
刀尖半径中心路径
r
r
圆弧中心
假想圆
圆弧终点
L
L
L
r
C
S
工件
图5.4.3 (a)
不存在内边的交点时 如果刀具径补偿值或刀尖半径补偿值足够小，即使在偏置路径上存在圆弧的交点P，当刀具径补偿值或刀尖半径补偿值 增大时，交点P 不存在。此时，在上一程序段的终点，会有报警(PS0033), “G41/G42 无交点”发出，刀具停止。 譬如，图5.4.3 (b)中当刀具径补偿值或刀尖半径补偿值足够小时，即使沿圆弧A 和圆弧B 的已被偏置的路径在交点P 点 相交，但如果刀具径补偿值或刀尖半径补偿值增大，该交点就不会形成。
P
r
r
刀具径补偿值或刀尖半径补偿值
变小时的刀具中心路径
刀具径补偿值或刀尖半径补偿值
增大时的刀具中心路径
编程路径
发出报警，刀具停止。
圆弧A 的中心
圆弧B 的中心
圆弧A
圆弧B
图5.4.3 (b)

出处 [5] [PDF/B-64694CM-2_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM-2_01.PDF) 

直线→直线
（圆弧连接
类型）
圆弧→直线
（圆弧连接
类型）
直线→圆弧
（圆弧连接
类型）
圆弧→圆弧
（圆弧连接
类型）
α
编程路径
L
L
S
r
r
刀具中心路径
α
S
r
r
编程路径
刀具中心路径
C
C
C
L
α
编程路径
C
L
r
r
刀具中心路径
S
α
S
r
r
C
C
C
编程路径
刀具中心路径
工件
工件
工件
工件
C
B
64694CM
2/01
编程
6. 补偿功能
131
例外情况
圆弧的终点不在圆弧上时
圆弧的终点不在圆弧上时，系统则假设：刀具径补偿是相对于一个假想圆进行，该假想圆通过圆弧终点，圆弧中心为中
心，根据这种假设，系统创建一个矢量，并进行补偿。“圆弧→圆弧”的情况也相同。
编程路径
刀具中心路径
r
r
圆弧中心
假想圆
圆弧终点
L
L
L
r
C
S
工件
不存在内边的交点时
如果刀具径补偿值或刀尖半径补偿值足够小，即使在偏置路径上存在圆弧的交点P，当刀具径补偿值或刀尖半径补偿值
增大时，交点P 不存在。此时，在上一程序段的终点，会有报警(PS0033) “G41/G42 无交点”发出，刀具停止。
譬如，
当刀具径补偿值或刀尖半径补偿值足够小时，即使沿圆弧A 和圆弧B 的已被偏置的路径在交点P 点相交，但如果
刀具径补偿值或刀尖半径补偿值增大，该交点就不会形成。
P
r
r
刀具径补偿值或刀尖半径补偿值
变小时的刀具中心路径
刀具径补偿值或刀尖半径补偿值
增大时的刀具中心路径
编程路径
显示报警后停止。
圆弧A 的中心

出处 [6] [PDF/B-64694CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM_01.PDF) 

刀具位置补偿等、刀具形状补偿、累加
:
M02;
G10 Lbaaa ＋ 各种刀具补偿格式
L 格式：Lbaaa
aaa : 200－ 刀具位置补偿、刀尖半径补偿（刀具径补偿）、假想刀尖方向
刀具磨损补偿
: 201－ 刀具位置补偿、刀尖半径补偿（刀具径补偿）、假想刀尖方向
刀具形状补偿
b   : 0  － 将指令数据覆盖到当前数据
: 1  － 将指令数据累加到当前数据。
各种刀具补偿格式
aaa : 200, 201－ 刀具位置补偿、刀尖半径补偿（刀具径补偿）、假想刀尖方向
P_: 刀具偏置号
X_: X 轴的刀具位置补偿量
Z_: X 轴的刀具位置补偿量（刀具长度补偿）
R_: 刀尖半径补偿（刀具径补偿值）
Q_: 假想刀尖方向
Y_: Y 轴的刀具位置补偿值
B-64694CM/01
编程
15. 补偿功能
323 -
以G10 格式输入
此项表示可以通过G10 格式输入偏置数据。
G10P1X1.001Z2.001R3.001Q4Y5.001
Pn : 刀具偏置号（1～刀具补偿个数）
Pn ≦ 10000 : 刀具磨损补偿
Pn ≦ 10001 : 刀具形状补偿
X_ : X 轴的刀具位置补偿
Z_ : Z 轴的刀具位置补偿
R_ : 刀尖半径补偿、
Q_ : 假想刀尖方向
Y_ : Y 轴的刀具位置补偿
用户宏程序系统变量
利用本功能，参照的用户宏程序系统变量不会发生变化。
限制事项
(1) 不可与本功能一起使用的功能
MANUAL GUIDE i
若是准备和上述功能一起使用，刀具偏置画面就会变为以前的画面，G43.7 将无法使用。

出处 [7] [PDF/B-64694CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A&file_name=PDF%2FB-64694CM_01.PDF) 

加工中心系统的情形
在刀具长度自动测量功能（G37）中，测量位置到达信
号在参数(No.6254)(ε值)中指定的区域跟前成为“1”。
或者一直到最后也没有成为“1”。
车床系统的情形
在刀具自动补偿功能(G36、
G37)中，
用参数
（No. 6254、
6255）(ε值)设定的区域内测量位置到达信号(XAE1、
XAE2)不会成为“1”。
G. 报警列表
附录
B-64694CM/01
1408 -
号码
信息
内容
0081
G37 中H 代码未指定
G37 OFFSET NO. UNASSIGNED
加工中心系统的情形
在刀具长度自动测量功能下，
没有指定H 代码就指定了
刀具长度自动测量(G37)。
请修改程序。
车床系统的情形
在刀具自动补偿功能中，
没有指定T 代码就指定了刀具
自动补偿(G36、G37)。
请修改程序。
0082
G37 与H 代码在同一段指令
G37 SPECIFIED WITH H CODE
加工中心系统的情形
在刀具长度自动测量功能下，H 代码和刀具长度自动测
量(G37)被指定在相同程序段中。
请修改程序。
车床系统的情形
在刀具自动补偿功能中，T 代码和刀具自动补偿(G36、
G37)指定在相同程序段中。
请修改程序。
0083
G37 轴指令不正确
G37 IMPROPER AXIS COMMAND
加工中心系统的情形
在刀具自动补偿功能(G37)中，错误地指定了轴指令。
或移动指令为增量指令。
请修改程序。
车床系统的情形
在刀具自动补偿功能(G36、G37)中，错误地指定了轴指
令。或指令为增量指令。
请修改程序。
```
