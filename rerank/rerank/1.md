```text
出处 [14] [PDF/B-64694CM-1_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A2&file_name=PDF%2FB-64694CM-1_01.PDF) 

结束程序段中没有 G40 时，发生报警(PS0538)“刀尖半径补偿尚未取消”。
4. 为简化编程的功能
编程
B
64694CM
1/01
46
G70 精削形状内的刀尖半径补偿指令程序例）
G40 ;
G70 P10 Q20 ... ;
N10 G41 ... ;
：
N20 G40 ... ;
循环时间缩短 在 G71 以及 G72 中，通过将参数 ASU(No.5107#0)设定为 1，可以将上一次的向车削起点移动（动作 1）变更为使用快速 进给的移动。 参数 ASU(No.5107#0)在类型 I 指令、类型Ⅱ指令中均有效。
类型 I 指令的情形
+X
+Z
：可选快速移动
：按开头程序段的方式
动作 1
动作 2
本次的切削点
上次的切削点
图4.2.1 (t)
在类型 I 指令的 G71 以及 G72 中，通过将参数 ASC(No.5107#1)设定为 1，可以将本次的向车削起点的动作（动作 1、动 作 2）从 2 个循环变更为 1 个循环。进给模式遵循形状程序段的开头程序段的模式（G00,G01）。 参数 ASC(No.5107#1)仅在类型 I 指令中有效。
类型 I 指令的情形
+X
+Z
动作 1
动作 2
本次的切削点
上次的切削点
图4.2.1 (u)
在类型 I 指令的 G71/G72 中，如果将参数 DTP(No.5108#1)设定为 1，粗精加工切削结束后，从精削形状程序的终点直接 向循环开始点返回。
B
64694CM
1/01
编程
4. 为简化编程的功能
47 -
循环起点
参数DTP= 1的路径
参数DTP= 0的路径
精削程序的结尾

出处 [12] [PDF/B-64694CM-1_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A2&file_name=PDF%2FB-64694CM-1_01.PDF) 

3
本循环有效期间，即使指令了 G90（绝对指令），A,B,W 的指令也将为增量指令。
4. 为简化编程的功能
编程
B
64694CM
1/01
108
4.6.2
横向直接固定尺寸磨削循环(G72)
执行横向直接固定尺寸磨削循环。
格式 G72 P_ A_ B_ W_ U_ I_ K_ H_ ; P_ ： 量规号（设定值 1～4） A_ ： 第 1 切削量（切削方向根据指令的符号而定。） B_ ： 第 2 切削量（切削方向根据指令的符号而定。） W_ ： 磨削范围（磨削方向根据指令的符号而定。） U_ ： 暂停时间 I_ ： A、B 的进给速度 K_ ： W 的进给速度 H_ ： 重复次数（设定值 1～9999） G72
解释
当使用多重跳转时，可以指定量规号。量规号的指定方法与多重跳转相同。当没有多重跳转时，常规的跳转信号有效。
量规号以外的指令以及动作与 G71 相同。
跳转信号输入时的动作 G72 中，通过在循环过程中输入一个跳转信号，在使当前的动作顺序中断后（或者使当前的动作顺序结束后），可以使 循环结束。 下面列出在每个动作顺序中跳转信号输入时的动作。
在动作顺序(1)、(4)中（A,B 移动时）跳转信号输入时，立即停止切削操作，刀具返回到循环开始时的α坐标。
α
X
W
A
B
(1)(I)
(2)U
(3)(K)
(4)(I)
(5)U
(6)(K)
（结束）
跳转信号
跳转信号
（结束）
B
64694CM
1/01
编程
4. 为简化编程的功能
109
在动作顺序(2)、(5)中（暂停中）跳转信号输入时，立即停止暂停，刀具返回到循环开始时的α坐标。

出处 [2] [PDF/B-64694CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A2&file_name=PDF%2FB-64694CM_01.PDF) 

信号*CHLD = "0"
停止（保持状态）
信号 CHPST = "0"
停止（取消）
程序指令 G80
停止（取消）
程序指令 G81.1
信号*CHLD = "0"
停止（保持状态）
信号 CHPST = "0"
不停止
程序指令 G80
停止（取消）
注释
1
即使切换到手动模式，或者通过进给保持而保持自动运行，振荡动作也将继续进行。
2
振荡动作中，无法进行振荡轴的移动指令。否则会发生报警(PS5050)"G81.1 模式非法指令"。
3
基于信号指令的振荡动作中，即使在已经进行了 G81.1 程序指令的情况下，也继续进行振荡动作。此时，在因
G81.1 指令而导致 R 点、上死点、下死点、振荡基准速度发生变更的情况下，根据已被变更的数据，继续进行
振荡动作。
4
基于信号指令的振荡动作，不是从通电时起有效，而是在一度完成手动参考点返回后才会有效。
5
将振荡启动信号 CHPST 设定为"1"或者"0"的 M 代码，务必要将其设定为禁止缓冲的 M 代码（参数(No.3411
～3432)）。
注意
NC 自动运行中取消振荡动作后，在同一运行中对该轴以 NC 程序段进行了移动指令（绝对/增量指令同时）时，
请使用 G 代码指令（G80）取消指令。
另一方面，需要基于信号输入执行振荡动作的取消时，请务必在取消振荡动作后指令下述(1)或(2)。
(1) 打开各轴工件坐标系预置信号 WPRST 的 M 代码
(2) 工件坐标系预设(G92.1)
例）在下述 O0001 中，在取消振荡动作（Z 轴）后（N40），执行移动指令（N60）时，需要以 N50 指令“打

出处 [16] [PDF/B-65435CM_01.PDF](http://127.0.0.1:7861/knowledge_base/download_doc?knowledge_base_name=Fanuc%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A2&file_name=PDF%2FB-65435CM_01.PDF) 

3.4.3
返回参考点
指令数据1（参考点位编号/参考点设定） 可启动状态 使用PMC 处理 AL信号及报警个数/编号 ⑤  报警显示 无法正常结束执行时 发生报警状态 （UCPS2=0）    动作完成信号 OP
夹紧完成 ④                动作完成信号 OPC3·夹紧指令信号（UCPC2） ③                返回参考点完成信号 向各参考点移动 ②         （UCPS2=1）   动作完成信号 OPC2 动作完成信号 OPC1·松开指令信号（UCPC2） 松开完成 ST信号 或  +X、-X信号 使用PMC 处理 机能代码=4 JOG模式可 启动状态 伺服放大器运转状态 ① CNC PMC 主机NC
① 在主机 NC 侧 PMC 中对伺服放大器设置机能代码、指令数据 1，然后发送 ST 信号或＋X/－X 信号。伺服放大器接 收到数据后向主机 NC 返回动作完成信号 OPC1，同时输出松开指令信号。 ② 收到主机 NC 发出的松开完成后，在向主机 NC 返回动作完成信号 OPC2 的同时，伺服放大器开始向指定的参考点 移动。 ③ 伺服放大器移动结束后向主机 NC 返回返回参考点完成信号与动作完成信号 OPC3，同时输出夹紧指令信号。 ④ 收到主机 NC 发出的夹紧完成后，伺服放大器向主机 NC 返回动作完成信号 OPC4，并处于可启动状态，并结束循环。 ⑤ 在伺服放大器中执行返回参考点时如果发生报警，将输出 AL 信号，请在主机 NC 侧 PMC 上执行报警显示等处理。 此时，通过在信号 DSAL［2.3.13(9)］中输入“1”，可以在响应数据中输出报警个数及编号。
```
在数控加工中，动作指令的执行需遵循特定的流程与参数设置，以下为关键点说明：
关于 G71/G72 粗加工循环的动作优化

    参数 ASU（No.5107#0）
        设定为 1 时，可将 动作 1（上一次切削起点的移动） 改为快速进给（G00 模式），缩短循环时间。
        适用于 类型 I 指令（如G71、G72），通过减少进给模式切换时间提升效率。

    参数 ASC（No.5107#1）
        设定为 1 时，将 动作 1 和动作 2（本次切削起点的移动） 合并为单次循环，减少重复动作。
        进给模式遵循粗加工程序段的初始指令（如 G00 或 G01）。
        仅适用于类型 I 指令（如G71、G72）。

    参数 DTP（No.5108#1）
        设定为 1 时，精加工完成后直接返回 循环起点（图4.2.1(u)），无需经过中间路径，进一步缩短路径时间。
        若未启用（0），则需按常规路径返回（图4.2.1(t)）。

G72 横向直接固定尺寸磨削循环的动作逻辑

    动作顺序：
        A、B 切削量移动（动作 1/4）：根据指令符号确定切削方向。
        暂停（U 参数指定时间）（动作 2/5）。
        W 磨削范围移动（动作 3/6）。
        若在动作 1 或 4 中输入跳转信号，立即中断当前切削并返回循环起点 α 坐标。
        若在动作 2 或 5（暂停中）输入跳转信号，直接终止暂停并返回起点。

    参数关联：
        量规号（P_）用于多重跳转，需与 G71 的逻辑保持一致。
        指令格式中的 H_ 可设定循环重复次数（1-9999 次）。

振荡动作（G81.1）的信号控制

    启动与取消：
        通过 信号 CHPST = "1" 启动振荡，CHPST = "0" 或 G80 指令 取消。
        注意：取消振荡后若需移动振荡轴，必须通过以下方式之一重置状态：
            指令 G92.1（工件坐标系预设）。
            激活 WPRST 信号（工件坐标系预置信号）。

    报警预防：
        振荡过程中禁止对振荡轴直接移动指令，否则触发 报警 PS5050。
        信号控制的振荡需在 完成手动参考点返回后 才能生效。

返回参考点（Reference Point）的信号交互

    流程步骤（基于出处[16]）：
        ① 伺服参数设置：CNC 发送机能代码与参考点指令（如 ST 或 ±X 信号），伺服放大器返回 OPC1 确认。
        ② 松开工件：伺服放大器收到松开指令后移动至参考点，返回 OPC2。
        ③ 夹紧完成：到达参考点后夹紧，返回 OPC3 与完成信号。
        ④ 循环结束：最终确认信号 OPC4，恢复可启动状态。

    报警处理：
        若返回过程中发生错误，伺服放大器输出 AL 报警信号，需通过 DSAL[9] 信号读取报警编号与数量。

常见问题与错误处理

    报警 PS0538（刀尖半径补偿未取消）：
        原因：程序结束时未通过 G40 取消刀尖半径补偿（G41/G42）。
        解决：确保程序末尾包含 G40 指令，或在循环结束前通过参数 DTP=1 自动返回安全路径。

如需进一步分析具体场景（如参数配置或报警排查），请提供更详细的操作或程序段信息。