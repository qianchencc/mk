# 亚龙大模型参数报告

### 摘要

本报告旨在阐述亚龙大模型的选型、性能测试及部署方案。我们选择 **gpt-oss-20B** 作为基准模型，该模型在RAG问答、指令遵循等方面表现出色。性能测试结果表明，模型对知识库内问题的回答能力较强，在有补丁的情况下表现尤为稳定和出色。针对峰值200人同时使用的场景，我们推荐采用**双NVIDIA L40S**的服务器配置，以提供流畅的用户体验。

---

### 1. 基准模型选型

#### 1.1 选定模型
**gpt-oss-20B**

#### 1.2 选型理由
选择 gpt-oss-20B 作为基准模型，主要基于以下优势：
- **卓越的RAG性能**: 在RAG（检索增强生成）问答场景中表现良好，回答风格贴合助手与导师的角色定位。
- **强大的指令遵循能力**: 相较于同类模型（如Qwen系列），其指令遵循能力更强，能更好地约束未知问题的幻觉。
- **先进的技术架构**: 采用了更优的分词器架构和量化策略，兼顾了模型性能与推理效率。
- **理想的参数规模**: 20B的参数量在性能和推理速度之间取得了良好平衡，是当前场景下的“甜点”选择。

---

### 2. 性能评估与测试

#### 2.1 测试方法
本次测试旨在评估模型在特定知识领域内的准确性和鲁棒性。
- **题目来源**: 基于4个领域的专业文档，由AI自动生成57道测试题，并附带参考答案。部分题目存在一定的“幻觉”，用于同步评估模型的通用回答能力。
- **测试流程**:
    1.  **第一轮（无补丁）**: 在未提供额外上下文（补丁）的情况下进行测试。
    2.  **第二轮（有补丁）**: 针对第一轮中表现不佳的回答，补充相关上下文后进行第二轮测试。
- **评估标准**: 初步使用嵌入模型计算回答与参考答案的向量相似度以进行筛选，最终由AI重新分析与打分，评估回答的准确性。
- **注意**: 向量相似度并不能用于评估回答的正确与否，这里仅作为简单的筛选手段减少工作量，以及填补数据空白。

#### 2.2 测试结果与分析
- **测试数据**: 详细的测试结果请见附件 [AI对检索结果的对比分析.md](AI%E5%AF%B9%E6%A3%80%E7%B4%A2%E7%BB%93%E6%9E%9C%E7%9A%84%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90.md)
测试数据 [yalong_test_results.xlsx](yalong_test_results.xlsx)或[yalong_test_results.csv](yalong_test_results.csv)
原始文件请见目录source_file

- **结论**: 亚龙大模型对知识库内的问题具备强大的回答能力。在获得精确上下文（补丁）后，其回答的准确性和稳定性接近完美。同时，得益于基准模型强大的指令遵循能力，仅通过提示词工程（Prompt Engineering）即可有效抑制模型在面对未知或无法回答问题时的幻觉。

#### 2.3 性能基准（Token生成速度）
- **当前开发配置**:
    - **显卡**: NVIDIA GeForce RTX 4090 (24G)
    - **实测速度**: 单请求生成速度约为 **60 tokens/s**，足以满足开发和调试阶段的需求。
- **生产环境预估**:
    - **推荐配置**: 双 NVIDIA L40S (共96G显存) 总价约10w
    - **预估速度**:
        - **单请求（低并发）**: 预计可达 **600 tokens/s** 以上。
        - **高并发（200用户）**: 仍可保持每用户约 **50 tokens/s** 的流畅体验。
    - **备选配置**: 单 NVIDIA A100 (80G) 总价约5w
        - **预估性能**: 整体性能约为双L40S方案的70%。

---

### 3. 生产环境部署建议

#### 3.1 适用场景
该配置旨在满足**峰值200人以内**同时在线使用的需求，保障流畅的交互体验。

#### 3.2 硬件配置
- **显卡 (GPU)**: **双 NVIDIA L40S (48G x2)** 或 **单 NVIDIA A100 (80G)**。前者在AI推理性能上更具优势。
- **CPU**: 无特殊要求，建议选用单核性能较强的型号，用于处理嵌入模型计算等任务。
- **内存 (RAM)**: 要求不高。若显存不足，可将嵌入模型部署于内存，仍能保证可用性。
- **硬盘 (Storage)**: 推荐使用 **MinIO** 等对象存储方案。该方案支持分布式扩展，前期无需一次性投入过高成本，使用机械硬盘即可满足需求。